<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Salesforce CPQ Toolkit</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Funnel+Sans:wght@300..800&display=swap');

    :root {
      --color-crimson: #c92228;
      --color-crimson-light: #e8454a;
      --color-gold: #E09F3E;
      --color-gold-light: #f0c06a;
      --color-white: #ffffff;
      --color-bg: #0f1117;
      --color-surface: #181c26;
      --color-surface-2: #1e2334;
      --color-surface-3: #252a3d;
      --color-border: rgba(255,255,255,0.08);
      --color-border-active: rgba(201,34,40,0.5);
      --color-text: #e8eaf0;
      --color-text-muted: #7d8494;
      --color-text-subtle: #4a5066;
      --color-success: #2ecc71;
      --font-family: 'Funnel Sans', system-ui, sans-serif;
      --radius: 8px;
      --radius-sm: 4px;
      --transition: 150ms ease;
    }

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      width: 320px;
      min-height: 420px;
      font-family: var(--font-family);
      background: var(--color-bg);
      color: var(--color-text);
      font-size: 14px;
      -webkit-font-smoothing: antialiased;
      overflow: hidden;
    }

    .hidden { display: none !important; }

    /* Header */
    .header {
      background: linear-gradient(135deg, #0f1117 0%, #181218 100%);
      border-bottom: 1px solid var(--color-border);
      padding: 16px 20px;
      position: relative;
      overflow: hidden;
    }
    .header::before {
      content: '';
      position: absolute;
      top: -40px; right: -40px;
      width: 120px; height: 120px;
      background: radial-gradient(circle, rgba(201,34,40,0.15) 0%, transparent 70%);
      pointer-events: none;
    }
    .header::after {
      content: '';
      position: absolute;
      bottom: 0; left: 0; right: 0;
      height: 2px;
      background: linear-gradient(90deg, var(--color-crimson), var(--color-gold), transparent);
    }
    .logo-row { display: flex; align-items: center; gap: 10px; }
    .logo-icon {
      width: 32px; height: 32px;
      background: var(--color-crimson);
      border-radius: 8px;
      display: flex; align-items: center; justify-content: center;
      font-size: 18px;
      box-shadow: 0 2px 12px rgba(201,34,40,0.5);
      flex-shrink: 0;
    }
    .logo-name { font-size: 15px; font-weight: 800; color: var(--color-white); letter-spacing: -0.03em; line-height: 1; }
    .logo-name span { color: var(--color-crimson); }
    .logo-sub { font-size: 10px; color: var(--color-text-muted); font-weight: 500; letter-spacing: 0.04em; text-transform: uppercase; margin-top: 2px; }

    /* Org status */
    .org-status {
      display: flex; align-items: center; gap: 8px;
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius);
      padding: 8px 12px;
      margin: 12px 16px;
    }
    .org-info { flex: 1; min-width: 0; }
    .org-name { font-size: 12px; font-weight: 600; color: var(--color-text); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
    .org-url { font-size: 11px; color: var(--color-text-muted); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

    .status-dot { width: 8px; height: 8px; border-radius: 50%; display: inline-block; flex-shrink: 0; }
    .status-dot.active { background: var(--color-success); box-shadow: 0 0 6px rgba(46,204,113,0.6); }
    .status-dot.inactive { background: var(--color-text-subtle); }

    /* Section label */
    .section-label {
      font-size: 10px; font-weight: 700; letter-spacing: 0.1em;
      text-transform: uppercase; color: var(--color-text-subtle);
      padding: 8px 20px 4px;
    }

    /* Tool cards */
    .tools-list { padding: 0 12px 12px; display: flex; flex-direction: column; gap: 6px; }
    .tool-card {
      display: flex; align-items: center; gap: 12px;
      padding: 12px 14px;
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius);
      cursor: pointer; text-decoration: none; color: var(--color-text);
      transition: all var(--transition);
      position: relative; overflow: hidden;
    }
    .tool-card::before {
      content: '';
      position: absolute; left: 0; top: 0; bottom: 0; width: 3px;
      background: var(--color-crimson);
      transform: scaleY(0);
      transition: transform var(--transition);
      border-radius: 0 2px 2px 0;
    }
    .tool-card:hover { border-color: var(--color-border-active); background: var(--color-surface-2); transform: translateX(2px); }
    .tool-card:hover::before { transform: scaleY(1); }
    .tool-icon { width: 38px; height: 38px; border-radius: var(--radius); display: flex; align-items: center; justify-content: center; font-size: 20px; flex-shrink: 0; }
    .tool-icon.crimson { background: rgba(201,34,40,0.15); }
    .tool-icon.gold { background: rgba(224,159,62,0.15); }
    .tool-info { flex: 1; min-width: 0; }
    .tool-name { font-size: 13px; font-weight: 700; color: var(--color-text); line-height: 1.2; }
    .tool-desc { font-size: 11px; color: var(--color-text-muted); margin-top: 2px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
    .tool-arrow { color: var(--color-text-subtle); font-size: 16px; flex-shrink: 0; transition: all var(--transition); }
    .tool-card:hover .tool-arrow { color: var(--color-gold); transform: translateX(2px); }

    /* Not on Salesforce */
    .not-sfdc { padding: 20px; text-align: center; }
    .not-sfdc-icon { font-size: 40px; margin-bottom: 12px; opacity: 0.5; }
    .not-sfdc-title { font-size: 14px; font-weight: 700; color: var(--color-text); margin-bottom: 6px; }
    .not-sfdc-desc { font-size: 12px; color: var(--color-text-muted); line-height: 1.5; }

    /* Privacy badge */
    .privacy-badge {
      display: flex; align-items: center; gap: 6px;
      background: rgba(46,204,113,0.08);
      border: 1px solid rgba(46,204,113,0.15);
      border-radius: var(--radius);
      padding: 6px 12px;
      margin: 0 12px 12px;
    }
    .privacy-badge-text { font-size: 10px; color: #4ddd8a; font-weight: 600; letter-spacing: 0.02em; }

    /* Footer */
    .footer {
      border-top: 1px solid var(--color-border);
      padding: 10px 16px;
      display: flex; align-items: center; justify-content: space-between;
    }
    .footer-left { font-size: 11px; color: var(--color-text-subtle); }
    .footer-links { display: flex; gap: 10px; }
    .footer-link { font-size: 11px; color: var(--color-text-subtle); cursor: pointer; transition: color var(--transition); }
    .footer-link:hover { color: var(--color-gold); }
  </style>
</head>
<body>

  <div class="header">
    <div class="logo-row">
      <div class="logo-icon">‚öô</div>
      <div>
        <div class="logo-name">CPQ <span>Toolkit</span></div>
        <div class="logo-sub">Salesforce CPQ Inspector</div>
      </div>
    </div>
  </div>

  <div class="org-status">
    <div class="status-dot inactive" id="statusDot"></div>
    <div class="org-info">
      <div class="org-name" id="orgName">Detecting Salesforce org‚Ä¶</div>
      <div class="org-url" id="orgUrl">Navigate to a Salesforce page to begin</div>
    </div>
  </div>

  <div id="sfdcContent" class="hidden">
    <div class="privacy-badge">
      <span>üîí</span>
      <span class="privacy-badge-text">Your data stays in your org ‚Äî zero external calls, ever.</span>
    </div>
    <div class="section-label">CPQ Tools</div>
    <div class="tools-list">
      <a class="tool-card" id="openTwinField" href="#">
        <div class="tool-icon crimson">üîÅ</div>
        <div class="tool-info">
          <div class="tool-name">Twin Field Explorer</div>
          <div class="tool-desc">Find & audit twin fields in your CPQ config</div>
        </div>
        <span class="tool-arrow">‚Ä∫</span>
      </a>
      <a class="tool-card" id="openSkuQuote" href="#">
        <div class="tool-icon gold">üìã</div>
        <div class="tool-info">
          <div class="tool-name">SKU Quote Explorer</div>
          <div class="tool-desc">Simulate quotes against live pricing rules</div>
        </div>
        <span class="tool-arrow">‚Ä∫</span>
      </a>
    </div>
  </div>

  <div id="notSfdc" class="hidden">
    <div class="not-sfdc">
      <div class="not-sfdc-icon">‚òÅ</div>
      <div class="not-sfdc-title">Not on Salesforce</div>
      <div class="not-sfdc-desc">Navigate to your Salesforce org to use<br>the CPQ Toolkit tools.</div>
    </div>
  </div>

  <div class="footer">
    <span class="footer-left">v1.0.0</span>
    <div class="footer-links">
      <span class="footer-link" id="openGithub">GitHub</span>
      <span class="footer-link" id="openPrivacy">Privacy</span>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
